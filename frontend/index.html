<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MediScope AI Agent</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=DM+Sans:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/static/styles.css" />
  </head>
  <body>
    <div class="bg-glow"></div>
    <div class="page">
      <header class="topbar">
        <div class="brand">
          <div class="logo">MS</div>
          <div>
            <p class="brand-title">MediScope</p>
            <p class="brand-subtitle">Medical Voice + Vision AI Agent</p>
          </div>
        </div>
        <div class="status">
          <span class="status-dot"></span>
          <span id="health-status">Checking API...</span>
        </div>
      </header>

      <main class="layout">
        <section class="info-panel">
          <h1>Clinical guidance, not clinical decisions.</h1>
          <p>
            This agent supports education and triage workflows with RAG, speech, and
            vision tooling. It is not a diagnostic system. If the input contains red-flag
            symptoms, the assistant will surface an emergency notice.
          </p>

          <div class="feature-grid">
            <div class="feature-card">
              <h3>LlamaIndex RAG</h3>
              <p>Ingest policy docs and local notes into a searchable context vault.</p>
            </div>
            <div class="feature-card">
              <h3>Speech Pipeline</h3>
              <p>Record voice, run STT, and read back responses with TTS.</p>
            </div>
            <div class="feature-card">
              <h3>Medical Vision</h3>
              <p>OCR-first image intake with optional medical VLM question answering.</p>
            </div>
            <div class="feature-card">
              <h3>Safety Guardrails</h3>
              <p>Red-flag detection with an emergency escalation notice.</p>
            </div>
          </div>

          <div class="disclaimer">
            <p><strong>Medical safety:</strong> education + triage only. No diagnosis or prescriptions.</p>
          </div>
        </section>

        <section class="chat-panel">
          <div class="chat-header">
            <div>
              <h2>Assistant Console</h2>
              <p class="muted">Multi-modal prompt builder with voice and image capture.</p>
            </div>
            <button class="ghost" id="clear-chat">Clear</button>
          </div>

          <div class="chat-window" id="chat-window"></div>

          <div class="controls">
            <div class="control-row">
              <label class="control">
                <span>Image input</span>
                <input type="file" id="image-input" accept="image/*" />
              </label>
              <label class="control">
                <span>Question for image</span>
                <input type="text" id="image-question" placeholder="What should I look for?" />
              </label>
              <button class="outline" id="analyze-image">Analyze Image</button>
            </div>

            <div class="control-row">
              <label class="control">
                <span>Voice capture</span>
                <div class="record-group">
                  <button class="outline" id="record-btn">Start recording</button>
                  <button class="outline" id="stop-btn" disabled>Stop</button>
                </div>
              </label>
              <label class="control">
                <span>Audio file</span>
                <input type="file" id="audio-input" accept="audio/*" />
              </label>
              <button class="outline" id="transcribe-audio">Transcribe Audio</button>
            </div>

            <div class="prompt-box">
              <textarea id="user-message" rows="3" placeholder="Describe symptoms, timeline, and key concerns."></textarea>
              <div class="prompt-actions">
                <button class="primary" id="send-btn">Send to Agent</button>
                <button class="ghost" id="play-tts">Play Response</button>
              </div>
            </div>

            <div class="output-box">
              <p class="label">Image Insights</p>
              <p id="image-insights" class="muted">No image analyzed yet.</p>
            </div>

            <div class="output-box">
              <p class="label">Safety Notices</p>
              <p id="safety-notice" class="muted">No safety notices.</p>
            </div>
          </div>
        </section>
      </main>
    </div>

    <script src="/static/app.js"></script>
  </body>
</html>
